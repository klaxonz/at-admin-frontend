(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0ae0"],{"438c":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("d2-container",[e("el-card",[e("el-row",[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"grid-content bg-purple"},[e("el-tree",{attrs:{data:t.treeData,props:t.defaultProps,accordion:""},on:{"node-click":t.handleNodeClick}})],1)]),e("el-col",{attrs:{span:20}},[e("div",{staticClass:"grid-content bg-purple-light"},[e("d2-crud",{ref:"d2Crud",attrs:{columns:t.columns,data:t.data,pagination:t.pagination,rowHandle:t.rowHandle},on:{"pagination-current-change":t.paginationCurrentChange,"custom-emit-1":t.handleCustomEvent}})],1)])],1)],1)],1)},i=[],o=(e("159b"),e("9bd2")),l={data:function(){return{columns:[{title:"学院",key:"collegeName"},{title:"专业",key:"majorName"},{title:"班级",key:"className",width:"250"},{title:"年级",key:"grade"},{title:"出勤率",key:"attendanceRate"}],data:[],treeData:[],defaultProps:{children:"children",label:"label"},options:{},pagination:{page:1,pageSize:6,total:0},rowHandle:{custom:[{text:"查看",type:"info",size:"small",emit:"custom-emit-1"},{text:"移除",type:"danger",size:"small",emit:"custom-emit-2"}]},majorId:0}},created:function(){this.fetchData()},methods:{paginationCurrentChange:function(t){this.pagination.page=t,this.majorId>0?this.fetchMajorData():this.fetchData()},fetchData:function(){var t=this,a=this;Object(o["a"])({url:"/class/",method:"get",params:a.pagination}).then((function(a){t.data=a.list,t.pagination.total=a.total})),Object(o["a"])({url:"/class/tree",method:"get"}).then((function(a){var e=a,n=[];e.forEach((function(t){var a={};a.id=t.collegeId,a.label=t.collegeName,a.children=[],t.list.forEach((function(t){var e={};e.id=t.majorId,e.label=t.majorName,a.children.push(e)})),n.push(a)})),t.treeData=n}))},fetchMajorData:function(){var t=this,a={page:this.pagination.page,pageSize:this.pagination.pageSize,majorId:this.majorId};Object(o["a"])({url:"/class/major/",method:"get",params:a}).then((function(a){t.data=a.list,t.pagination.total=a.total}))},handleNodeClick:function(t){void 0==t.children&&(this.majorId=t.id,this.pagination.page=1,this.pagination.pageSize=6,this.pagination.total=0,this.fetchMajorData())}}},c=l,r=e("2877"),s=function(t){t.options.__source="src/pages/classes/list/index.vue"},d=s,p=Object(r["a"])(c,n,i,!1,null,null,null);"function"===typeof d&&d(p);a["default"]=p.exports}}]);